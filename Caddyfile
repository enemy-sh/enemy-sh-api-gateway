https://api.enemy.sh {
	tls {
		protocols tls1.2 tls1.3
		issuer acme
	}

	handle /.well-known/acme-challenge/* {
		respond {http.request.uri.path} 200
	}

	handle_path /api/contact* {
		header Access-Control-Allow-Origin "https://enemy.sh"
		header Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS"
		header Access-Control-Allow-Headers "*"
		header Access-Control-Allow-Credentials "true"

		@options {
			method OPTIONS
		}
		respond @options 204

		reverse_proxy enemy-sh-contact-api
	}

	handle {
		respond "Not Found" 404
	}
}
